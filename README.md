# wire_go_template

A template Go project demonstrating clean dependency injection using [Google Wire](https://github.com/google/wire).

## Overview

This project provides a simple structure for Go applications that require dependency injection. It uses interfaces and Google's Wire to manage dependencies for cache and SQL repositories, making the codebase modular, testable, and easy to extend.

## Directory Structure

```
wire_go_template/
├── cmd/
│   └── main.go            # Application entry point
├── inject/
│   ├── injector.go        # Interfaces, implementations, and constructors
│   ├── wire.go            # Wire provider sets and injector definition
│   └── wire_gen.go        # Auto-generated by Wire
├── go.mod                 # Go module definition
├── go.sum                 # Go module checksums
├── instructions.txt       # Setup instructions
└── README.md              # Project documentation
```

## Dependency Injection with Wire

- **injector.go**: Defines interfaces and implementations for cache and SQL repositories, as well as the `AppContext` struct.
- **wire.go**: Sets up provider sets and the `InitializeEvent` injector function using Wire.
- **wire_gen.go**: Generated by Wire, contains the actual wiring logic.

## Setup

1. **Clone the repository:**
   ```sh
   git clone <your-repo-url>
   cd wire_go_template
   ```
2. **Initialize Go modules and tidy dependencies:**
   ```sh
   go mod init go-wire
   go mod tidy
   ```
3. **Install Wire:**
   ```sh
   go get github.com/google/wire/cmd/wire
   ```
4. **Generate the wire injector:**
   ```sh
   go run github.com/google/wire/cmd/wire
   ```
   > Ensure `//go:build wireinject` is present in `wire.go` as required by Wire.

## Usage

Run the application:
```sh
go run ./cmd/main.go
```

The main function initializes the application context and demonstrates repository usage:
```go
appCtx, err := inject.InitializeEvent()
if err != nil {
    log.Fatalf("failed to initialize app context: %v", err)
}
appCtx.Repository.GetSql().GetConnection()
appCtx.Repository.GetCache().GetConnection()
```

## Extending the Template
- Add new services or repositories by defining interfaces and implementations in `injector.go`.
- Register new providers in `wire.go` using `wire.NewSet`.
- Regenerate the injector with `wire` after making changes.

## References
- [Google Wire Documentation](https://github.com/google/wire)

## License
MIT